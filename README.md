# Сравнение приближенно вычисленного быстроосциллирующего интеграла при помощи метода Симпсона с точным аналитическим решением, полученным в Вольфраме.

## Идея:
Численные методы позволяют приближать практический любой интеграл, однако оценка точности не всегда корректна. Для изучения точности различных методов
вполне логично использовать аналитические решения интегралов. Wolfram Mathematica позволяет получать эти решения достаточно быстро и просто, однако
реализовывать методы приближенного вычисления на Вольфраме несуразно.

Именно поэтому я предалаю некоторый шаблон кода, который позволяет одновременно быстро получать приближенное решение в Питоне и точное решение из Вольфрама.

## Методы
Wolfram Mathematica предоставляет пользователм свои вычислительные мощности(ограниченные, но все же) и облако, в котором эти расчеты могут проводиться.
Мы можем заставить Питон при помощи библиотики "requests" посылать запросы на свое облако с определенными аргументами и получать от Вольфрама посчитаный ответ, таким
образом настраивая API:
```ruby
url = f"https://www.wolframcloud.com/obj/03ded825-704c-46f2-bb2a-5e4f4e7d3b50?f={f}&llim={llim}&rlim={rlim}"
ans = requests.get(url).json()
```
Так как в задаче исследуются интегралы типа $$\int_{llim}^{rlim} f(x) cos(kx) dx$$
Мы будем передавать Вольфраму только f(x) и пределы интегрирования.

Вольфрам в качестве респонса отправлят JSON объект, в котором содержится информация о успехе, времени и результате вычислений. 

![image](https://github.com/iZarub/Wolfram/assets/71636846/ba685459-0d60-47f0-81de-5ad19ccd7c17)

## Код на Вольфраме
![image](https://github.com/iZarub/Wolfram/assets/71636846/0ee045cd-63df-4f31-b6d5-c5adde150cd0)

Как можно увидеть, код достаточно прост для такой задачи, но более сложная задача будет решаться идейно так же.


## Проблемы
Поскольку дальнейшая реализация таких систем - некоторые приложения, в которых функции будут вводиться вручную в традиционном формате,
возникает проблема несоответствия синтаксиса питона и вольфрама, а также проблема перевода строк, полученных из JSON в выражения в Питоне.
Имеено для решения этой проблемы был написан wolframparser.py. Собственноручно был прописан перевод синтаксиса:

```ruby
OUTPUT_SYMBOLS = {
    "^" : "**",
    "[" : "(",
    "]" : ")",
    "Cos": "math.cos",
    "Sin": "math.sin",
    "Pi" : "math.pi",
    "Log": "math.log",
    "e": "math.exp(1)",
    "pi" : "math.pi",
}

INPUT_SYMBOLS = {
    "inf" : "Infinity",
    "infty": "Infinity",
    "pi" : "Pi",
    "sin": "Sin",
    "cos": "Cos",
    "ln": "Ln",
    "log" : "Ln",
    "sqrt": "Sqrt",
}
```

Таким образом, теперь мы можем переводить результаты вольфрама, которые получаем в формате строки, в обычные lambda функции в питоне с использованием метода
eval(). Пример:

(math.exp(1)**math.pi*math.log(math.exp(1)) - math.cos(k*math.pi)*math.log(math.exp(1)) + k*math.sin(k*math.pi))/(math.exp(1)**math.pi*(k**2 + math.log(math.exp(1))**2))

## Еще по поводу API
В этой реализации я использовал обращение к облаку напрямую через requests(TestApi.py), но также можно увидеть файл WolframApi.py, который в котором реализовано
свое API, которое можно поставить уже на свой домен, развернуть на сервере и тд.

## Результаты
Поскольку вывод Вольфрама неоднозначен и может содержать какие-то Conditions и так далее, исключение на которые писать займет некоторое время, я использовал заранее
изветные функции f(x), чтобы все работало:
```ruby
input = "e^(-x)"
llim = "0"
rlim = "pi"
```
Замечу, что ввод является традиционным. Язык Вольфрама такое не поддерживает в сухом виде.
Прогон по 120 значениям частоты дает следующий результат:


![image](https://github.com/iZarub/Wolfram/assets/71636846/e1572362-2bd6-4d5e-bc74-442e82ecafc5)

![image](https://github.com/iZarub/Wolfram/assets/71636846/41ffac68-d820-4f8c-ad02-f2811ccb5195)

## Дальнейшее развитие
Таким же образом при помощи Вольфрама можно производить разложение f(x) в ряд Тейлора

![image](https://github.com/iZarub/Wolfram/assets/71636846/7362c718-e4a8-4513-aa08-30a17bf73c0a)

и использовать другой способ получения интеграла. Это уже зависит от фантазии.

Также структура проекта позволяет спокойно написать интерфейс с классическим полем ввода и отображать графики прямо в окне приложения.
